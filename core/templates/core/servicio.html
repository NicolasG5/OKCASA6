
{% extends 'core/base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block css %}
{% endblock %}
{% block contenido %}

   

    <!-- Services Start -->
    <div class="container-fluid bg-light py-6 px-5">
        <div class="text-center mx-auto mb-5" style="max-width: 600px;">
            <h1 class="display-5 text-uppercase mb-4">Brindamos <span class="text-primary">los mejores</span> servicios de construccion </h1>
        </div>
        <div class="row g-5">
            <div class="col-lg-4 col-md-6">
                <div class="service-item bg-white d-flex flex-column align-items-center text-center">
                    <img class="img-fluid" src="{% static 'core/img/service-1.jpg' %}" alt="">
                    <div class="service-icon bg-white">
                        <i class="fa fa-3x fa-building text-primary"></i>
                    </div>
                    <div class="px-4 pb-4">
                        <h4 class="text-uppercase mb-3">Montar y desmontar estructuras prefabricadas</h4>
                        <p>Duo dolore et diam sed ipsum stet amet duo diam. Rebum amet ut amet sed erat sed sed amet magna elitr amet kasd diam duo</p>
                        <div id="btnPaypal"></div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item bg-white rounded d-flex flex-column align-items-center text-center">
                    <img class="img-fluid" src="{% static 'core/img/service-2.jpg' %}" alt="">
                    <div class="service-icon bg-white">
                        <i class="fa fa-3x fa-home text-primary"></i>
                    </div>
                    <div class="px-4 pb-4">
                        <h4 class="text-uppercase mb-3">Renovacion del hogar</h4>
                        <p>Duo dolore et diam sed ipsum stet amet duo diam. Rebum amet ut amet sed erat sed sed amet magna elitr amet kasd diam duo</p>
                        <a class="btn text-primary" href="">Leer más <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item bg-white rounded d-flex flex-column align-items-center text-center">
                    <img class="img-fluid" src="{% static 'core/img/service-3.jpg' %}" alt="">
                    <div class="service-icon bg-white">
                        <i class="fa fa-3x fa-drafting-compass text-primary"></i>
                    </div>
                    <div class="px-4 pb-4">
                        <h4 class="text-uppercase mb-3">Estudio de suelos</h4>
                        <p>Duo dolore et diam sed ipsum stet amet duo diam. Rebum amet ut amet sed erat sed sed amet magna elitr amet kasd diam duo</p>
                        <a class="btn text-primary" href="">Leer más <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item bg-white rounded d-flex flex-column align-items-center text-center">
                    <img class="img-fluid" src="{% static 'core/img/service-4.jpg' %}" alt="">
                    <div class="service-icon bg-white">
                        <i class="fa fa-3x fa-palette text-primary"></i>
                    </div>
                    <div class="px-4 pb-4">
                        <h4 class="text-uppercase mb-3">Diseños de interior</h4>
                        <p>Duo dolore et diam sed ipsum stet amet duo diam. Rebum amet ut amet sed erat sed sed amet magna elitr amet kasd diam duo</p>
                        <a class="btn text-primary" href="">Leer más <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item bg-white rounded d-flex flex-column align-items-center text-center">
                    <img class="img-fluid" src="{% static 'core/img/service-5.jpg' %}" alt="">
                    <div class="service-icon bg-white">
                        <i class="fa fa-3x fa-tools text-primary"></i>
                    </div>
                    <div class="px-4 pb-4">
                        <h4 class="text-uppercase mb-3">Reparacion y soporte</h4>
                        <p>Duo dolore et diam sed ipsum stet amet duo diam. Rebum amet ut amet sed erat sed sed amet magna elitr amet kasd diam duo</p>
                        <a class="btn text-primary" href="">Leer más <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6">
                <div class="service-item bg-white rounded d-flex flex-column align-items-center text-center">
                    <img class="img-fluid" src="{% static 'core/img/service-6.jpg' %}" alt="">
                    <div class="service-icon bg-white">
                        <i class="fa fa-3x fa-paint-brush text-primary"></i>
                    </div>
                    <div class="px-4 pb-4">
                        <h4 class="text-uppercase mb-3">Pintura</h4>
                        <p>Duo dolore et diam sed ipsum stet amet duo diam. Rebum amet ut amet sed erat sed sed amet magna elitr amet kasd diam duo</p>
                        <a class="btn text-primary" href="">Leer más <i class="bi bi-arrow-right"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Services End -->

    <script src="http://www.paypalobjects.com/api/checkout.js"></script>
<script>

var historial = []; // Arreglo para almacenar las compras

function agregarCompraAlHistorial(servicio, fecha) {
  historial.push({
    servicio: servicio,
    fecha: fecha
  });
}

function mostrarHistorialCompras() {
            var historialHTML = "<h2>Historial de Compras</h2>";
                            
                if (historial.length === 0) {
                    historialHTML += "<p>No hay compras registradas.</p>";
                    } else {
                        historialHTML += "<ul>";
                                
                        for (var i = 0; i < historial.length; i++) {
                            var compra = historial[i];
                            historialHTML += "<li>Servicio: " + compra.servicio + " - Fecha: " + compra.fecha + "</li>";
                                }
                                
                            historialHTML += "</ul>";
                    }
                            
        // Inserta el historial en un elemento HTML en tu página
        document.getElementById("historialCompras").innerHTML = historialHTML;
    }

    paypal.Button.render({
        env: 'sandbox',
        client: {
            sandbox: 'AfIRcMAwtD62L_MEUq6kBMN99a6axWuhTUq13ogGeOlm_1XwROv9BnLQ3a74YtZgiVgpUclTMz24qwKN',
            production: 'demo_production_client_id'
        },

        locale: 'es_CL',
        style: {
            size: 'small',
            color: 'black',
            shape: 'rect',
        },
        commit: true,
        payment: function (data, actions) {
            return actions.payment.create({
                transactions: [{
                    amount: {
                        total: '1.00',
                        currency: 'USD'
                    }
                }]
            });
        },

        onAuthorize: function (data, actions) {
            return actions.payment.execute().then(function () {
            Swal.fire({
                title: 'Pago Exitoso',
                text: 'Pago realizado correctamente!',
                icon: 'success',
                showCancelButton: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Aceptar'
            }).then((result) => {
                if (result.isConfirmed) {
                Swal.fire('Compra', 'Realizada exitosamente', 'success').then(function () {
                    var servicio = 'nombre_del_servicio'; // Reemplaza 'nombre_del_servicio' con el nombre o descripción del servicio que se compró
                    var fecha = new Date().toLocaleString(); // Registra la fecha y hora actual
                    agregarCompraAlHistorial(servicio, fecha);
                    mostrarHistorialCompras();

                    window.location.href = "/limpiar/";
          });
        }
      });
    });
  },

        onCancel(data) {
            Swal.fire({
                title: 'Pago Cancelado',
                text: 'Pago ha sido cancelado!',
                icon: 'error',
                showCancelButton: false,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Aceptar'


            });
        },
        

    }, '#btnPaypal');

</script>


<script>
    function pagar() {
        Swal.fire({
            title: '¿ Esta seguro ?',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Pagar'
        }).then((result) => {
            if (result.isConfirmed) {
                Swal.fire('Compra', ' realizada exitosamente', 'success').then(function () {
                    window.location.href = "/servicio/";
                })
            }
        })
    }
</script>



   
    {% endblock %}

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{% static 'core/lib/easing/easing.min.js' %}"></script>
    <script src="{% static 'core/lib/waypoints/waypoints.min.js' %}"></script>
    <script src="{% static 'core/lib/owlcarousel/owl.carousel.min.js' %}"></script>
    <script src="{% static 'core/lib/tempusdominus/js/moment.min.js' %}"></script>
    <script src="{% static 'core/lib/tempusdominus/js/moment-timezone.min.js' %}"></script>
    <script src="{% static 'core/lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js' %}"></script>
    <script src="{% static 'core/lib/isotope/isotope.pkgd.min.js' %}"></script>
    <script src="{% static 'core/lib/lightbox/js/lightbox.min.js' %}"></script>

    <!-- Template Javascript -->
    <script src="{% static 'core/js/main.js' %}"></script>
    <script src="{% static 'core/js/login.js' %}"></script>


</html>